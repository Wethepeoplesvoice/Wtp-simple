<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>We The People's Voice – Simple App</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #020617;
      --card: #0f172a;
      --card-soft: #111827;
      --accent: #22c55e;
      --accent-soft: rgba(34, 197, 94, 0.15);
      --text-main: #e5e7eb;
      --text-muted: #9ca3af;
      --danger: #ef4444;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
      background: radial-gradient(circle at top, #0f172a, var(--bg));
      color: var(--text-main);
    }

    .container {
      max-width: 960px;
      margin: 0 auto;
      padding: 1.5rem;
    }

    header {
      padding: 1.25rem 1.5rem;
      border-bottom: 1px solid rgba(148, 163, 184, 0.3);
      background: linear-gradient(to right, #020617, #0f172a);
      position: sticky;
      top: 0;
      z-index: 10;
    }

    .brand {
      font-size: 1.3rem;
      font-weight: 700;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      display: flex;
      align-items: center;
      gap: 0.4rem;
    }

    .brand-pill {
      border-radius: 999px;
      padding: 0.2rem 0.6rem;
      background: var(--accent-soft);
      color: var(--accent);
      font-size: 0.7rem;
      text-transform: uppercase;
    }

    .tagline {
      font-size: 0.85rem;
      color: var(--text-muted);
      margin-top: 0.2rem;
    }

    main {
      padding-bottom: 3rem;
    }

    .layout {
      display: grid;
      grid-template-columns: minmax(0, 2fr);
      gap: 1.5rem;
    }

    @media (min-width: 900px) {
      .layout {
        grid-template-columns: minmax(0, 5fr) minmax(0, 3.5fr);
        align-items: flex-start;
      }
    }

    .card {
      background: radial-gradient(circle at top left, #111827, var(--card));
      border-radius: 1rem;
      padding: 1.5rem;
      box-shadow: 0 18px 40px rgba(15, 23, 42, 0.85);
      border: 1px solid rgba(148, 163, 184, 0.25);
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 0.75rem;
      margin-bottom: 0.75rem;
    }

    .card-title {
      font-size: 1.2rem;
      font-weight: 600;
    }

    .card-subtitle {
      font-size: 0.85rem;
      color: var(--text-muted);
    }

    label {
      display: block;
      font-size: 0.85rem;
      font-weight: 500;
      margin-bottom: 0.25rem;
    }

    input[type="text"],
    textarea,
    select {
      width: 100%;
      background: #020617;
      border-radius: 0.6rem;
      border: 1px solid rgba(148, 163, 184, 0.5);
      padding: 0.55rem 0.7rem;
      color: var(--text-main);
      font-size: 0.95rem;
      outline: none;
      transition: border-color 0.12s ease, box-shadow 0.12s ease,
        background-color 0.12s ease;
    }

    textarea {
      min-height: 80px;
      resize: vertical;
    }

    input:focus,
    textarea:focus,
    select:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(34, 197, 94, 0.7);
      background: #020617;
    }

    .field {
      margin-bottom: 0.7rem;
    }

    .hint {
      font-size: 0.75rem;
      color: var(--text-muted);
      margin-top: 0.15rem;
    }

    .pill-row {
      display: flex;
      flex-wrap: wrap;
      gap: 0.4rem;
      margin: 0.4rem 0 0.3rem;
      font-size: 0.7rem;
    }

    .pill {
      padding: 0.2rem 0.55rem;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.5);
      color: var(--text-muted);
    }

    button {
      border: none;
      border-radius: 999px;
      padding: 0.5rem 1.2rem;
      font-size: 0.95rem;
      font-weight: 600;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      transition: transform 0.08s ease, box-shadow 0.12s ease,
        background-color 0.12s ease;
    }

    .btn-primary {
      background: linear-gradient(135deg, #16a34a, #22c55e);
      color: #022c22;
      box-shadow: 0 14px 28px rgba(34, 197, 94, 0.45);
    }

    .btn-primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 18px 35px rgba(34, 197, 94, 0.7);
    }

    .btn-primary:active {
      transform: translateY(0);
      box-shadow: 0 8px 18px rgba(34, 197, 94, 0.5);
    }

    .btn-icon {
      font-size: 0.9rem;
    }

    .stat-row {
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem;
      margin-top: 0.75rem;
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    .stat-pill {
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      padding: 0.25rem 0.6rem;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.85);
      border: 1px solid rgba(148, 163, 184, 0.6);
    }

    .stat-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: var(--accent);
    }

    .proposal-list {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
      margin-top: 0.75rem;
    }

    .proposal {
      background: var(--card-soft);
      border-radius: 0.9rem;
      padding: 0.75rem 0.9rem;
      border: 1px solid rgba(148, 163, 184, 0.32);
      display: grid;
      grid-template-columns: auto minmax(0, 1fr);
      gap: 0.6rem;
    }

    .vote-column {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.2rem;
      min-width: 48px;
    }

    .vote-score {
      font-weight: 600;
      font-size: 0.95rem;
    }

    .vote-btn {
      width: 26px;
      height: 26px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      background: transparent;
      color: var(--text-muted);
      font-size: 0.9rem;
      line-height: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0;
    }

    .vote-btn:hover {
      background: rgba(148, 163, 184, 0.22);
      color: #e5e7eb;
    }

    .proposal-main {
      min-width: 0;
    }

    .proposal-title-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0.5rem;
      margin-bottom: 0.1rem;
    }

    .proposal-title {
      font-size: 0.98rem;
      font-weight: 600;
    }

    .proposal-meta {
      font-size: 0.75rem;
      color: var(--text-muted);
      display: flex;
      gap: 0.45rem;
      flex-wrap: wrap;
    }

    .proposal-body {
      font-size: 0.85rem;
      color: #d1d5db;
      margin-top: 0.25rem;
      white-space: pre-wrap;
      word-wrap: break-word;
    }

    .badge {
      padding: 0.12rem 0.5rem;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--accent);
      background: rgba(15, 23, 42, 0.9);
    }

    .empty-state {
      text-align: center;
      font-size: 0.85rem;
      color: var(--text-muted);
      padding: 0.75rem 0.5rem 0.25rem;
    }

    .filter-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 0.6rem;
      margin-top: 0.5rem;
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    .filter-select {
      max-width: 220px;
    }

    .note {
      font-size: 0.74rem;
      color: var(--text-muted);
      margin-top: 0.5rem;
      line-height: 1.4;
    }

    .note strong {
      color: #e5e7eb;
    }

    footer {
      border-top: 1px solid rgba(148, 163, 184, 0.35);
      padding: 0.85rem 1.5rem 1.2rem;
      font-size: 0.75rem;
      color: var(--text-muted);
      text-align: center;
      background: #020617;
    }
  </style>
</head>
<body>
  <header>
    <div class="container">
      <div class="brand">
        We The People's Voice
        <span class="brand-pill">Grassroots Civic App</span>
      </div>
      <div class="tagline">
        Vote. Your power. We The People will be heard.
      </div>
    </div>
  </header>

    <main>
    <div class="container">
      <div class="layout">
        <!-- LEFT: create proposal -->
        <section class="card">
          <div class="card-header">
            <div>
              <div class="card-title">Create a new issue to vote on</div>
              <div class="card-subtitle">
                One page, one idea. Start a proposal and let people vote it up or down.
              </div>
            </div>
          </div>

          <form id="proposalForm">
            <div class="field">
              <label for="title">Issue title</label>
              <input
                id="title"
                type="text"
                required
                maxlength="120"
                placeholder="Example: Term limits for members of Congress"
              />
              <div class="hint">Keep it clear and focused.</div>
            </div>

            <div class="field">
              <label for="level">Where does this apply?</label>
              <select id="level" required>
                <option value="national">National (U.S. wide)</option>
                <option value="state">State level</option>
                <option value="local">Local / city / county</option>
              </select>
              <div class="pill-row">
                <span class="pill">No party labels</span>
                <span class="pill">Ideas only</span>
                <span class="pill">Article V style thinking</span>
              </div>
            </div>

            <div class="field">
              <label for="description">What are you asking for?</label>
              <textarea
                id="description"
                required
                maxlength="800"
                placeholder="Describe the change, why it matters, and what action you want Congress or your state to take."
              ></textarea>
              <div class="hint">
                This is your simple, plain-language one-page ‘bill’.
              </div>
            </div>

            <button type="submit" class="btn-primary">
              <span class="btn-icon">➕</span>
              Publish issue for voting
            </button>

            <div class="note">
              <strong>Prototype only:</strong> Right now proposals and votes are
              saved only in your browser on this device. Later, they can be
              tied to verified U.S. voters and legally formatted to send to
              Congress and state representatives once enough support is reached.
            </div>
          </form>
        </section>

        <!-- RIGHT: list proposals -->
        <section class="card">
          <div class="card-header">
            <div>
              <div class="card-title">Live issues & votes (on this device)</div>
              <div class="card-subtitle">
                See the questions you’ve created and practice voting them up or down.
              </div>
            </div>
          </div>

          <div class="filter-row">
            <span>Showing issues saved in this browser.</span>
            <select id="filterLevel" class="filter-select">
              <option value="all">All levels</option>
              <option value="national">National only</option>
              <option value="state">State only</option>
              <option value="local">Local only</option>
            </select>
          </div>

          <div id="proposalList" class="proposal-list"></div>

          <div class="note">
            When this grows into the full app, issues with enough verified
            support will be turned into formal petitions and one-page proposals
            that can be delivered to Congress and your state representatives as
            a clear mandate from We The People.
          </div>
        </section>
      </div>
    </div>
  </main>

  <footer>
    This is an early grassroots prototype. Built to help bring trust,
    transparency, and citizen power back into our government.
  </footer>

  <script>
    // ------- Simple local "database" using localStorage -------
    const STORAGE_KEY = "wtp_simple_proposals_v1";

    function loadProposals() {
      try {
        const raw = localStorage.getItem(STORAGE_KEY);
        if (!raw) return [];
        const parsed = JSON.parse(raw);
        return Array.isArray(parsed) ? parsed : [];
      } catch (e) {
        console.error("Failed to read proposals", e);
        return [];
      }
    }

    function saveProposals(list) {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(list));
    }

    let proposals = loadProposals();

    // ------- Rendering -------
    const proposalListEl = document.getElementById("proposalList");
    const filterLevelEl = document.getElementById("filterLevel");

    function formatTime(ts) {
      const d = new Date(ts);
      return d.toLocaleDateString(undefined, {
        month: "short",
        day: "numeric",
        year: "numeric",
      });
    }

    function render() {
      const filter = filterLevelEl.value;
      proposalListEl.innerHTML = "";

      const filtered = proposals.filter((p) =>
        filter === "all" ? true : p.level === filter
      );

      if (filtered.length === 0) {
        proposalListEl.innerHTML =
          '<div class="empty-state">No issues yet. Create one on the left to see it here and practice voting.</div>';
        return;
      }

      filtered
        .slice()
        .sort((a, b) => b.createdAt - a.createdAt)
        .forEach((p) => {
          const wrapper = document.createElement("article");
          wrapper.className = "proposal";

          wrapper.innerHTML = `
            <div class="vote-column">
              <button class="vote-btn" data-id="${p.id}" data-dir="up">▲</button>
              <div class="vote-score">${p.votes}</div>
              <button class="vote-btn" data-id="${p.id}" data-dir="down">▼</button>
            </div>
            <div class="proposal-main">
              <div class="proposal-title-row">
                <div class="proposal-title">${escapeHtml(p.title)}</div>
                <span class="badge">${p.level.toUpperCase()}</span>
              </div>
              <div class="proposal-meta">
                <span>Created ${formatTime(p.createdAt)}</span>
                <span>By: You (local test)</span>
              </div>
              <div class="proposal-body">${escapeHtml(p.description)}</div>
            </div>
          `;

          proposalListEl.appendChild(wrapper);
        });
    }

    // ------- Helpers -------
    function escapeHtml(str) {
      return String(str)
        .replace(/&/g, "&amp;")
        .replace(/</g, "&lt;")
        .replace(/>/g, "&gt;")
        .replace(/"/g, "&quot;")
        .replace(/'/g, "&#039;");
    }

    // ------- Form handling -------
    const form = document.getElementById("proposalForm");

    form.addEventListener("submit", (e) => {
      e.preventDefault();
      const title = document.getElementById("title").value.trim();
      const description = document.getElementById("description").value.trim();
      const level = document.getElementById("level").value;

      if (!title || !description) return;

      const proposal = {
        id: Date.now().toString(36) + Math.random().toString(36).slice(2),
        title,
        description,
        level,
        votes: 0,
        createdAt: Date.now(),
      };

      proposals.push(proposal);
      saveProposals(proposals);
      form.reset();
      render();
    });

    // ------- Voting handling (event delegation) -------
    proposalListEl.addEventListener("click", (e) => {
      const btn = e.target.closest(".vote-btn");
      if (!btn) return;
      const id = btn.getAttribute("data-id");
      const dir = btn.getAttribute("data-dir");

      const p = proposals.find((x) => x.id === id);
      if (!p) return;

      if (dir === "up") p.votes += 1;
      else if (dir === "down") p.votes -= 1;

      saveProposals(proposals);
      render();
    });

    filterLevelEl.addEventListener("change", render);

    // initial render
    render();
  </script>
</body>
</html>
